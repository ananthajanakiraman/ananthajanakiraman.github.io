<!doctype html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <title>Graphic title here</title><?php /* EDIT ME */ ?>


    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="style.css"/>
    
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

</head>

<body class="">

    <div id="main-wrapper" class="">
        <div id="main-content" class="container">
            <header class="row">
                <div class="social-links col-md-12"></div>
                <div class="col-md-12">

                    <h1>Bitcoin Trend Visualization</h1>
                    <div class="byline">By <a href="#">Anantha Janakiraman</a></div>

                    <div class="meta">
                        Published Jul. 24, 2017
                    </div>
                </div>
            </header>

            <section class="row">

            <div class="col-md-12 chart">
                <!-- ********* -->
                <!-- The empty div for the tooltip goes inside of our chart div -->
                <!-- ********* -->
                <div class="tt"></div>
            </div>

            </section>

            <footer>
                <div id="source-line">Source: Source goes here.</div>
            </footer>

        </div>
    </div>



    <!-- jQuery.js -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    
    <!-- Moment.js -->
   
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.js" charset="utf-8"></script>-->


    <!-- Bootstrap JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <!-- Our application script -->
    
    <script type="text/javascript">
        
        $(document).ready(function() {
         console.log("Hello world.")
        });
       //Set our margin, width and height
       //Pin the width and height to the .chart div
       var margin = {
         top: 20,
         right: 80,
         bottom: 30,
         left: 50
       },
       width = $(".chart").width() - margin.left - margin.right,
       height = $(".chart").height() - margin.top - margin.bottom;
        
       var parseDate = d3.time.format("%Y-%m-%d").parse;

       var x = d3.time.scale()
                 .range([0, width]);

       var y = d3.scale.linear()
                 .range([height, 0]);
        
       //Color exists as a Scale. 
       var color = d3.scale.category10();

       var xAxis = d3.svg.axis()
                     .scale(x)
                     .orient("bottom");

       var yAxis = d3.svg.axis()
                     .scale(y)
                     .orient("left");
       
       var line = d3.svg.line()
                    .interpolate("basis")
                    .x(function(d) {
                       return x(d.date);
                     })
                    .y(function(d) {
                       return y(d.price);
                     });
        
        var svg = d3.select(".chart").append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
       d3.tsv("data1.tsv", function(error, data) {
             if (error) throw error; 

           data.forEach(function(d) {
                d.date = parseDate(d.Date);
                d.price = +d.Price;
                return d;
           });


           x.domain(d3.extent(data, function(d) {
             return d.date;
           }));

           y.domain(d3.extent(data, function(d) {
             return d.price;
             }));
          
           
          svg.append("g")
             .attr("class", "x axis")
             .attr("transform", "translate(0," + height + ")")
             .call(xAxis);
           
          svg.append("g")
             .attr("transform", "translate(0,0)")
             .attr("class", "y axis")
             .call(yAxis)
             .append("text")
             .attr("transform", "rotate(-90)")
             .attr("y", 6)
             .attr("dy", ".71em")
             .style("text-anchor", "end")
             .text("Average Price");
           
          svg.append("path")
             .datum(data)
             .attr("class", "line")
             .attr("fill", "none")
             .attr("stroke", "steelblue")
             .attr("stroke-linejoin", "round")
             .attr("stroke-linecap", "round")
             .attr("stroke-width", 1.5)
             .attr("d", line);
           
       });       
        
    </script>
   
</body>
</html>
